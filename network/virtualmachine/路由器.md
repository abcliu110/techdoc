<div id="chap-router"></div>

[⬆️ 返回目录](#catalog)


## 路由器

这个问题的核心在于理解 **网络分层模型（OSI模型）** 中，**MAC地址（二层/数据链路层）** 和 **IP地址（三层/网络层）** 实际上是各司其职的。

简单直接的回答：
**“包 MAC 地址不对”** 指的是：你发送给路由器的那个数据帧（Frame）里，**目标 MAC 地址（Destination MAC）写的不是路由器那个接口的 MAC 地址**。

如果目标 MAC 不是路由器自己，路由器底层的硬件（网卡）就会认为：“这不是给我的东西”，然后直接把包丢弃，看都不看里面的 IP 地址一眼。

---

### 详细解释：为什么必须写对路由器的 MAC？

为了让你彻底明白，我们用一个**“快递转运”**的例子，然后对应到**“网络技术”**上。

#### 1. 生活类比：公司前台转交快递

假设你在 A 公司，你要给 B 公司的老王发一个快递。

*   **你的动作**：你把快递打包好，写上最终收件人：**“B 公司 - 老王（IP地址）”**。
*   **发送过程**：你不能直接飞到 B 公司，你必须先把快递交给你们公司的**“前台（路由器）”**，由前台帮你发出去。
*   **关键点来了**：
    当你把包裹递给前台时，你必须嘴上喊一声（或者在包裹最外层贴个条）：**“给前台（MAC地址）”**。

**如果不这么做（MAC地址不对）：**
如果你把包裹扔在前台桌子上，但包裹最外层贴条写着 **“给保洁阿姨”**（即：目标 MAC 写错了，不是路由器的 MAC），前台小妹看了一眼标签，心想：“哦，这是给保洁阿姨的，不是给我的。” **于是她根本不会拆开包裹，也不会去读里面“B 公司 - 老王”的信息，直接就把包裹放在一边或者扔了。**

这就是 **“MAC 地址不对”** 的意思。

#### 2. 技术原理：二层与三层的剥离

当电脑（主机）要发送数据到互联网时，数据包的结构是像洋葱一样包裹的：

*   **里层（三层 IP 包）：** 源 IP = 你，目标 IP = 百度服务器。
*   **外层（二层 以太网帧）：** 源 MAC = 你，**目标 MAC = ？？？**

**路由器的接收逻辑是这样的：**

1.  **物理接收**：网线上传来了电信号，路由器的网卡接收到了数据帧。
2.  **第一道关卡（MAC 校验）**：
    路由器的网卡硬件会立刻检查数据帧头的 **目标 MAC 地址**。
    *   **如果 目标 MAC == 路由器自己的 MAC**：路由器说：“嘿，这是给我的！” -> **接收**，拆掉外层，拿出里面的 IP 包进行路由转发。
    *   **如果 目标 MAC != 路由器自己的 MAC**：路由器说：“这不是给我的，是发给局域网里别人的。” -> **丢弃**（除非是广播包）。

**这就是所谓的“前提”：**
路由器必须先觉得自己是这个包的“接收者”（Layer 2 接收者），它才会费力气去拆包，查看里面的 IP 地址（Layer 3），然后根据路由表帮你转发。

如果外层的 MAC 地址写错了（比如写成了局域网里另一台电脑的 MAC，或者瞎写的 MAC），路由器的网卡在硬件层面就直接把包过滤掉了，根本轮不到路由软件去处理转发。

### 总结

所谓 **“包 MAC 地址不对”**，意思就是：

主机想让路由器帮忙转发数据，但是发送出来的以太网帧（Ethernet Frame）的 **Destination MAC（目的MAC地址）** 没有填写 **路由器网关接口的 MAC 地址**。

**后果：** 路由器也是高冷的，既然外包装没写它的名字，它就视而不见，直接丢弃，导致转发失败。

<!-- 跳转链接 -->
[⬆️ 返回目录](#catalog)  |  [文章开头 ➡️](#chap-ruter)