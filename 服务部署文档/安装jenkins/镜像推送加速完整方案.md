# é•œåƒæ¨é€åŠ é€Ÿå®Œæ•´æ–¹æ¡ˆï¼ˆæŒ‰æ•ˆæœæ’åºï¼‰

## å½“å‰çŠ¶æ€

- é•œåƒå¤§å°ï¼šçº¦ 300 MB
- æ¨é€æ—¶é—´ï¼š8-10 åˆ†é’Ÿ
- ç½‘ç»œï¼šé˜¿é‡Œäº‘ä¸ªäººç‰ˆï¼ˆ0.5-1 MB/sï¼‰
- å·²ä¼˜åŒ–ï¼šLevel 9 å‹ç¼©

---

## æ–¹æ¡ˆå¯¹æ¯”æ€»è§ˆ

| æ–¹æ¡ˆ | æ•ˆæœ | éš¾åº¦ | æˆæœ¬ | æ¨é€æ—¶é—´ | æ¨èåº¦ |
|------|------|------|------|---------|--------|
| **1. æœ¬åœ°é•œåƒä»“åº“** | â­â­â­â­â­ | ä¸­ | ä½ | **10ç§’** | â­â­â­â­â­ |
| **2. Spring Boot åˆ†å±‚** | â­â­â­â­â­ | ä½ | å…è´¹ | **1åˆ†é’Ÿ** | â­â­â­â­â­ |
| **3. Alpine åŸºç¡€é•œåƒ** | â­â­â­ | ä½ | å…è´¹ | **6åˆ†é’Ÿ** | â­â­â­â­ |
| 4. å¯ç”¨é•œåƒç¼“å­˜ | â­â­â­â­ | ä¸­ | å…è´¹ | 1-3åˆ†é’Ÿ | â­â­â­â­ |
| 5. Distroless é•œåƒ | â­â­â­ | ä¸­ | å…è´¹ | 5åˆ†é’Ÿ | â­â­â­ |
| 6. è‡ªå®šä¹‰ JRE (jlink) | â­â­â­â­ | é«˜ | å…è´¹ | 4åˆ†é’Ÿ | â­â­â­ |
| 7. GraalVM Native | â­â­â­â­â­ | å¾ˆé«˜ | å…è´¹ | 30ç§’ | â­â­ |
| 8. Harbor é•œåƒä»“åº“ | â­â­â­â­â­ | é«˜ | ä¸­ | 10ç§’ | â­â­â­â­ |
| 9. é˜¿é‡Œäº‘ä¼ä¸šç‰ˆ | â­â­â­ | ä½ | é«˜ | 3åˆ†é’Ÿ | â­â­â­ |
| 10. å¹¶è¡Œæ¨é€æ¨¡å— | â­â­ | ä½ | å…è´¹ | 8åˆ†é’Ÿ | â­â­ |

---

## ğŸ† æ–¹æ¡ˆ 1: æœ¬åœ°é•œåƒä»“åº“ï¼ˆæœ€æ¨èï¼‰

### æ•ˆæœ
- **æ¨é€æ—¶é—´ï¼šä» 8 åˆ†é’Ÿé™åˆ° 10 ç§’**
- **æå‡ï¼š98%**
- **é€‚ç”¨ï¼šæ‰€æœ‰åœºæ™¯**

### åŸç†

```
Jenkins
    â†“ æ¨é€åˆ°æœ¬åœ°ä»“åº“ï¼ˆ10ç§’ï¼‰
æœ¬åœ° Docker Registry (K8s é›†ç¾¤å†…)
    â†“ K8s éƒ¨ç½²ï¼ˆ5ç§’ï¼‰
åº”ç”¨ Pod
    â†“ åå°åŒæ­¥åˆ°é˜¿é‡Œäº‘ï¼ˆä¸é˜»å¡ï¼‰
é˜¿é‡Œäº‘é•œåƒä»“åº“
```

### å®æ–½æ­¥éª¤

#### 1. éƒ¨ç½²æœ¬åœ° Registry

```yaml
# registry-deployment.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: registry

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: registry-pvc
  namespace: registry
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 100Gi
  storageClassName: local-path  # æ ¹æ®ä½ çš„ StorageClass è°ƒæ•´

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: docker-registry
  namespace: registry
spec:
  replicas: 1
  selector:
    matchLabels:
      app: docker-registry
  template:
    metadata:
      labels:
        app: docker-registry
    spec:
      containers:
      - name: registry
        image: registry:2
        ports:
        - containerPort: 5000
        env:
        - name: REGISTRY_STORAGE_DELETE_ENABLED
          value: "true"
        - name: REGISTRY_HTTP_ADDR
          value: "0.0.0.0:5000"
        volumeMounts:
        - name: registry-data
          mountPath: /var/lib/registry
        resources:
          requests:
            cpu: 500m
            memory: 512Mi
          limits:
            cpu: 1000m
            memory: 1Gi
      volumes:
      - name: registry-data
        persistentVolumeClaim:
          claimName: registry-pvc

---
apiVersion: v1
kind: Service
metadata:
  name: docker-registry
  namespace: registry
spec:
  selector:
    app: docker-registry
  ports:
  - port: 5000
    targetPort: 5000
  type: ClusterIP
```

#### 2. éƒ¨ç½²åˆ° K8s

```bash
kubectl apply -f registry-deployment.yaml

# éªŒè¯
kubectl get pods -n registry
kubectl get svc -n registry
```

#### 3. ä¿®æ”¹ Jenkinsfile

```groovy
environment {
    // æœ¬åœ°é•œåƒä»“åº“ï¼ˆK8s é›†ç¾¤å†…ï¼‰
    LOCAL_REGISTRY = 'docker-registry.registry.svc.cluster.local:5000'

    // é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼ˆç”¨äºæœ€ç»ˆå­˜å‚¨ï¼‰
    REMOTE_REGISTRY = 'crpi-csgbt2t7j15cj178.cn-hangzhou.personal.cr.aliyuncs.com'
    DOCKER_NAMESPACE = 'lgy-images'
}

// ä¿®æ”¹ buildAndPushDockerImage å‡½æ•°
def buildAndPushDockerImage(String moduleName, String buildContext) {
    container('kaniko') {
        sh """
            # 1. æ¨é€åˆ°æœ¬åœ°ä»“åº“ï¼ˆå¾ˆå¿«ï¼Œ10ç§’ï¼‰
            /kaniko/executor \\
                --context=${buildContext} \\
                --dockerfile=${buildContext}/Dockerfile \\
                --destination=${LOCAL_REGISTRY}/${moduleName}:${BUILD_NUMBER} \\
                --destination=${LOCAL_REGISTRY}/${moduleName}:latest \\
                --insecure \\
                --skip-tls-verify \\
                --cache=false

            echo "âœ“ é•œåƒå·²æ¨é€åˆ°æœ¬åœ°ä»“åº“: ${LOCAL_REGISTRY}/${moduleName}:${BUILD_NUMBER}"
        """
    }

    // 2. åå°åŒæ­¥åˆ°é˜¿é‡Œäº‘ï¼ˆä¸é˜»å¡æµæ°´çº¿ï¼‰
    container('docker') {
        sh """
            # ä»æœ¬åœ°ä»“åº“æ‹‰å–
            docker pull ${LOCAL_REGISTRY}/${moduleName}:${BUILD_NUMBER}

            # é‡æ–°æ‰“æ ‡ç­¾
            docker tag ${LOCAL_REGISTRY}/${moduleName}:${BUILD_NUMBER} \\
                ${REMOTE_REGISTRY}/${DOCKER_NAMESPACE}/${moduleName}:${BUILD_NUMBER}

            # åå°æ¨é€åˆ°é˜¿é‡Œäº‘
            nohup docker push ${REMOTE_REGISTRY}/${DOCKER_NAMESPACE}/${moduleName}:${BUILD_NUMBER} > /tmp/push.log 2>&1 &

            echo "âœ“ æ­£åœ¨åå°åŒæ­¥åˆ°é˜¿é‡Œäº‘..."
        """
    }
}
```

#### 4. ä¿®æ”¹ K8s Deployment

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nms4cloud-pos4cloud
  namespace: dev
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nms4cloud-pos4cloud
  template:
    metadata:
      labels:
        app: nms4cloud-pos4cloud
    spec:
      containers:
      - name: nms4cloud-pos4cloud
        # ä½¿ç”¨æœ¬åœ°ä»“åº“é•œåƒ
        image: docker-registry.registry.svc.cluster.local:5000/nms4cloud-pos4cloud:latest
        imagePullPolicy: Always
        ports:
        - containerPort: 8080
```

### æ•ˆæœ

| é˜¶æ®µ | æ—¶é—´ |
|------|------|
| Maven æ„å»º | 2 åˆ†é’Ÿ |
| æ¨é€åˆ°æœ¬åœ°ä»“åº“ | **10 ç§’** âœ… |
| K8s éƒ¨ç½² | 5 ç§’ |
| **æ€»è®¡** | **2 åˆ† 15 ç§’** |
| åå°åŒæ­¥åˆ°é˜¿é‡Œäº‘ | 8 åˆ†é’Ÿï¼ˆä¸é˜»å¡ï¼‰ |

---

## ğŸ† æ–¹æ¡ˆ 2: Spring Boot åˆ†å±‚æ„å»ºï¼ˆæœ€ç®€å•ï¼‰

### æ•ˆæœ
- **é¦–æ¬¡æ¨é€ï¼š8 åˆ†é’Ÿ**
- **åç»­æ¨é€ï¼š1 åˆ†é’Ÿ**
- **æå‡ï¼š87.5%**

### å®æ–½æ­¥éª¤

#### 1. ä¿®æ”¹ pom.xml

```xml
<!-- æ¯ä¸ªæ¨¡å—çš„ pom.xml -->
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
                <layers>
                    <enabled>true</enabled>
                </layers>
            </configuration>
        </plugin>
    </plugins>
</build>
```

#### 2. ä¿®æ”¹ Dockerfile

```dockerfile
# æ¯ä¸ªæ¨¡å—çš„ Dockerfile
FROM eclipse-temurin:21-jre-alpine AS builder
WORKDIR /app
COPY target/*.jar app.jar
RUN java -Djarmode=layertools -jar app.jar extract

FROM eclipse-temurin:21-jre-alpine
WORKDIR /app

# åˆ†å±‚å¤åˆ¶ï¼ˆåˆ©ç”¨ Docker ç¼“å­˜ï¼‰
COPY --from=builder /app/dependencies/ ./
COPY --from=builder /app/spring-boot-loader/ ./
COPY --from=builder /app/snapshot-dependencies/ ./
COPY --from=builder /app/application/ ./

RUN apk add --no-cache tzdata && \
    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \
    apk del tzdata

RUN addgroup -S spring && adduser -S spring -G spring
USER spring:spring

ENV JAVA_OPTS="-Xms512m -Xmx1024m -XX:+UseG1GC"

EXPOSE 8080

ENTRYPOINT ["sh", "-c", "java $JAVA_OPTS org.springframework.boot.loader.JarLauncher"]
```

#### 3. Jenkinsfile ä¸éœ€è¦ä¿®æ”¹

Kaniko ä¼šè‡ªåŠ¨å¤„ç†å¤šé˜¶æ®µæ„å»ºã€‚

### æ•ˆæœ

| åœºæ™¯ | æ¨é€æ•°æ® | æ¨é€æ—¶é—´ |
|------|---------|---------|
| é¦–æ¬¡æ„å»º | 255 MB | 8 åˆ†é’Ÿ |
| åªæ”¹ä»£ç  | 14 MB | **1 åˆ†é’Ÿ** âœ… |
| å‡çº§ä¾èµ– | 70 MB | 6 åˆ†é’Ÿ |

---

## ğŸ† æ–¹æ¡ˆ 3: Alpine åŸºç¡€é•œåƒï¼ˆæœ€ç®€å•ï¼‰

### æ•ˆæœ
- **é•œåƒå¤§å°ï¼šä» 300 MB é™åˆ° 250 MB**
- **æ¨é€æ—¶é—´ï¼šä» 8 åˆ†é’Ÿé™åˆ° 6 åˆ†é’Ÿ**
- **æå‡ï¼š25%**

### å®æ–½æ­¥éª¤

```dockerfile
# åŸæ¥
FROM eclipse-temurin:21-jre        # 220 MB

# æ”¹ä¸º
FROM eclipse-temurin:21-jre-alpine # 170 MB

# æ·»åŠ æ—¶åŒºæ”¯æŒ
RUN apk add --no-cache tzdata && \
    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \
    apk del tzdata
```

### æ³¨æ„äº‹é¡¹

Alpine ä½¿ç”¨ musl libcï¼Œå¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜ï¼š
- âœ… å¤§å¤šæ•° Spring Boot åº”ç”¨æ²¡é—®é¢˜
- âš ï¸ å¦‚æœä½¿ç”¨ JNI æˆ–æœ¬åœ°åº“ï¼Œå¯èƒ½éœ€è¦æµ‹è¯•

---

## æ–¹æ¡ˆ 4: å¯ç”¨ Kaniko ç¼“å­˜

### æ•ˆæœ
- **é¦–æ¬¡æ¨é€ï¼š8 åˆ†é’Ÿ**
- **åç»­æ¨é€ï¼š1-3 åˆ†é’Ÿ**
- **æå‡ï¼š62-87%**

### å®æ–½æ­¥éª¤

#### 1. åœ¨é˜¿é‡Œäº‘åˆ›å»º cache ä»“åº“

ç™»å½•é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `cache` çš„ä»“åº“ã€‚

#### 2. ä¿®æ”¹ Jenkinsfile

```groovy
/kaniko/executor \
    --context=${buildContext} \
    --dockerfile=${dockerfilePath} \
    --destination=${dockerImageName}:${DOCKER_IMAGE_TAG} \
    --destination=${dockerImageName}:latest \
    --cache=true \                                    # å¯ç”¨ç¼“å­˜
    --cache-repo=${DOCKER_REGISTRY}/${DOCKER_NAMESPACE}/cache \  # ç¼“å­˜ä»“åº“
    --compression=gzip \
    --compression-level=9 \
    --push-retry=3
```

### æ•ˆæœ

| åœºæ™¯ | ç¼“å­˜å‘½ä¸­ | æ¨é€æ—¶é—´ |
|------|---------|---------|
| é¦–æ¬¡æ„å»º | æ—  | 8 åˆ†é’Ÿ |
| ä»£ç æ”¹åŠ¨ | åŸºç¡€é•œåƒå±‚ | **1-2 åˆ†é’Ÿ** âœ… |
| ä¾èµ–æ”¹åŠ¨ | éƒ¨åˆ†å±‚ | 3-5 åˆ†é’Ÿ |

---

## æ–¹æ¡ˆ 5: Distroless åŸºç¡€é•œåƒ

### æ•ˆæœ
- **é•œåƒå¤§å°ï¼šä» 300 MB é™åˆ° 200 MB**
- **æ¨é€æ—¶é—´ï¼šä» 8 åˆ†é’Ÿé™åˆ° 5 åˆ†é’Ÿ**
- **æå‡ï¼š37%**

### å®æ–½æ­¥éª¤

```dockerfile
# ä½¿ç”¨ Google Distrolessï¼ˆåªåŒ…å«è¿è¡Œæ—¶ï¼Œæ—  shellï¼‰
FROM gcr.io/distroless/java21-debian12

WORKDIR /app

COPY target/*.jar app.jar

EXPOSE 8080

ENTRYPOINT ["java", "-jar", "app.jar"]
```

### ä¼˜ç‚¹
- æ›´å°ï¼ˆçº¦ 180 MBï¼‰
- æ›´å®‰å…¨ï¼ˆæ—  shellï¼Œæ”»å‡»é¢å°ï¼‰
- æ›´å¿«

### ç¼ºç‚¹
- æ—  shellï¼Œè°ƒè¯•å›°éš¾
- éœ€è¦ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ

---

## æ–¹æ¡ˆ 6: è‡ªå®šä¹‰ JRE (jlink)

### æ•ˆæœ
- **é•œåƒå¤§å°ï¼šä» 300 MB é™åˆ° 150 MB**
- **æ¨é€æ—¶é—´ï¼šä» 8 åˆ†é’Ÿé™åˆ° 4 åˆ†é’Ÿ**
- **æå‡ï¼š50%**

### åŸç†

ä½¿ç”¨ jlink åˆ›å»ºåªåŒ…å«åº”ç”¨æ‰€éœ€æ¨¡å—çš„ JREï¼š

```bash
# æ ‡å‡† JRE: 170 MB
# è‡ªå®šä¹‰ JRE: 50 MBï¼ˆåªåŒ…å«éœ€è¦çš„æ¨¡å—ï¼‰
```

### å®æ–½æ­¥éª¤

```dockerfile
# é˜¶æ®µ 1: åˆ›å»ºè‡ªå®šä¹‰ JRE
FROM eclipse-temurin:21-jdk-alpine AS jre-builder

# åˆ†æåº”ç”¨éœ€è¦çš„æ¨¡å—
RUN jdeps --print-module-deps --ignore-missing-deps \
    /app/target/*.jar > /tmp/modules.txt

# åˆ›å»ºè‡ªå®šä¹‰ JRE
RUN jlink \
    --add-modules $(cat /tmp/modules.txt) \
    --strip-debug \
    --no-man-pages \
    --no-header-files \
    --compress=2 \
    --output /custom-jre

# é˜¶æ®µ 2: æ„å»ºæœ€ç»ˆé•œåƒ
FROM alpine:latest

COPY --from=jre-builder /custom-jre /opt/java
COPY target/*.jar /app/app.jar

ENV JAVA_HOME=/opt/java
ENV PATH=$JAVA_HOME/bin:$PATH

ENTRYPOINT ["java", "-jar", "/app/app.jar"]
```

### æ•ˆæœ

| ç»„ä»¶ | æ ‡å‡† JRE | è‡ªå®šä¹‰ JRE | èŠ‚çœ |
|------|---------|-----------|------|
| JRE | 170 MB | 50 MB | 120 MB |
| JAR | 85 MB | 85 MB | 0 MB |
| **æ€»è®¡** | **255 MB** | **135 MB** | **120 MB** |

---

## æ–¹æ¡ˆ 7: GraalVM Native Imageï¼ˆç»ˆææ–¹æ¡ˆï¼‰

### æ•ˆæœ
- **é•œåƒå¤§å°ï¼šä» 300 MB é™åˆ° 50 MB**
- **æ¨é€æ—¶é—´ï¼šä» 8 åˆ†é’Ÿé™åˆ° 30 ç§’**
- **å¯åŠ¨æ—¶é—´ï¼šä» 10 ç§’é™åˆ° 0.1 ç§’**
- **æå‡ï¼š94%**

### åŸç†

å°† Java åº”ç”¨ç¼–è¯‘æˆæœ¬åœ°å¯æ‰§è¡Œæ–‡ä»¶ï¼š
- æ— éœ€ JRE
- å¯åŠ¨æå¿«
- å†…å­˜å ç”¨å°

### å®æ–½æ­¥éª¤

#### 1. ä¿®æ”¹ pom.xml

```xml
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <!-- GraalVM Native æ”¯æŒ -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-native</artifactId>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.graalvm.buildtools</groupId>
            <artifactId>native-maven-plugin</artifactId>
        </plugin>
    </plugins>
</build>
```

#### 2. æ„å»º Native Image

```bash
# ä½¿ç”¨ GraalVM æ„å»º
mvn -Pnative native:compile

# ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
target/nms4cloud-pos4cloud-app  # çº¦ 50 MB
```

#### 3. Dockerfile

```dockerfile
FROM alpine:latest

# åªéœ€è¦ glibc
RUN apk add --no-cache glibc

COPY target/nms4cloud-pos4cloud-app /app/app

EXPOSE 8080

ENTRYPOINT ["/app/app"]
```

### æ•ˆæœ

| æŒ‡æ ‡ | JVM | Native | æ”¹å–„ |
|------|-----|--------|------|
| é•œåƒå¤§å° | 255 MB | 50 MB | 80% â†“ |
| å¯åŠ¨æ—¶é—´ | 10 ç§’ | 0.1 ç§’ | 99% â†“ |
| å†…å­˜å ç”¨ | 512 MB | 128 MB | 75% â†“ |
| æ¨é€æ—¶é—´ | 8 åˆ†é’Ÿ | 30 ç§’ | 94% â†“ |

### ç¼ºç‚¹
- ç¼–è¯‘æ—¶é—´é•¿ï¼ˆ5-10 åˆ†é’Ÿï¼‰
- ä¸æ”¯æŒæ‰€æœ‰ Java ç‰¹æ€§ï¼ˆåå°„ã€åŠ¨æ€ä»£ç†éœ€è¦é…ç½®ï¼‰
- è°ƒè¯•å›°éš¾

---

## æ–¹æ¡ˆ 8: Harbor ä¼ä¸šçº§é•œåƒä»“åº“

### æ•ˆæœ
- **æ¨é€æ—¶é—´ï¼š10 ç§’**
- **è‡ªåŠ¨åŒæ­¥åˆ°é˜¿é‡Œäº‘**
- **é•œåƒæ‰«æã€ç­¾åã€RBAC**

### å®æ–½æ­¥éª¤

```bash
# ä½¿ç”¨ Helm éƒ¨ç½² Harbor
helm repo add harbor https://helm.goharbor.io
helm install harbor harbor/harbor \
    --namespace harbor \
    --create-namespace \
    --set expose.type=nodePort \
    --set persistence.enabled=true
```

é…ç½®é•œåƒå¤åˆ¶ï¼š
1. Harbor â†’ é˜¿é‡Œäº‘è‡ªåŠ¨åŒæ­¥
2. Jenkins æ¨é€åˆ° Harborï¼ˆ10 ç§’ï¼‰
3. Harbor åå°åŒæ­¥åˆ°é˜¿é‡Œäº‘ï¼ˆä¸é˜»å¡ï¼‰

---

## ç»¼åˆä¼˜åŒ–æ–¹æ¡ˆï¼ˆæ¨èï¼‰

### æ–¹æ¡ˆ A: å¿«é€Ÿè§æ•ˆï¼ˆ1 å°æ—¶å®æ–½ï¼‰

```
1. Alpine åŸºç¡€é•œåƒ        â†’ èŠ‚çœ 25%
2. Spring Boot åˆ†å±‚       â†’ èŠ‚çœ 87%ï¼ˆåç»­æ„å»ºï¼‰
3. Level 9 å‹ç¼©ï¼ˆå·²å®æ–½ï¼‰  â†’ èŠ‚çœ 40%
```

**æ•ˆæœï¼š**
- é¦–æ¬¡æ¨é€ï¼š6 åˆ†é’Ÿ
- åç»­æ¨é€ï¼š1 åˆ†é’Ÿ
- æ€»ä½“æå‡ï¼š83%

### æ–¹æ¡ˆ B: æœ€ä½³æ€§èƒ½ï¼ˆ1 å¤©å®æ–½ï¼‰

```
1. æœ¬åœ° Docker Registry   â†’ æ¨é€ 10 ç§’
2. Spring Boot åˆ†å±‚       â†’ åç»­æ›´å¿«
3. Alpine åŸºç¡€é•œåƒ        â†’ æ›´å°
```

**æ•ˆæœï¼š**
- æ¨é€æ—¶é—´ï¼š10 ç§’
- éƒ¨ç½²æ—¶é—´ï¼š5 ç§’
- æ€»ä½“æå‡ï¼š98%

### æ–¹æ¡ˆ C: ç»ˆææ–¹æ¡ˆï¼ˆ1 å‘¨å®æ–½ï¼‰

```
1. æœ¬åœ° Docker Registry
2. Spring Boot åˆ†å±‚
3. GraalVM Native Image
```

**æ•ˆæœï¼š**
- é•œåƒå¤§å°ï¼š50 MB
- æ¨é€æ—¶é—´ï¼š5 ç§’
- å¯åŠ¨æ—¶é—´ï¼š0.1 ç§’
- æ€»ä½“æå‡ï¼š99%

---

## å®æ–½å»ºè®®

### ç¬¬ 1 å¤©ï¼šå¿«é€Ÿä¼˜åŒ–

1. âœ… ä¿®æ”¹ Dockerfile ä½¿ç”¨ Alpine
2. âœ… ä¿®æ”¹ pom.xml å¯ç”¨åˆ†å±‚
3. âœ… æµ‹è¯•æ„å»º

**é¢„æœŸæ•ˆæœï¼š** åç»­æ¨é€ä» 8 åˆ†é’Ÿé™åˆ° 1 åˆ†é’Ÿ

### ç¬¬ 2-3 å¤©ï¼šéƒ¨ç½²æœ¬åœ°ä»“åº“

1. éƒ¨ç½² Docker Registry åˆ° K8s
2. ä¿®æ”¹ Jenkinsfile
3. ä¿®æ”¹ K8s Deployment
4. æµ‹è¯•å®Œæ•´æµç¨‹

**é¢„æœŸæ•ˆæœï¼š** æ¨é€ä» 8 åˆ†é’Ÿé™åˆ° 10 ç§’

### ç¬¬ 4-7 å¤©ï¼šNative Imageï¼ˆå¯é€‰ï¼‰

1. é…ç½® GraalVM
2. ä¿®æ”¹ pom.xml
3. æµ‹è¯•ç¼–è¯‘
4. è§£å†³å…¼å®¹æ€§é—®é¢˜

**é¢„æœŸæ•ˆæœï¼š** é•œåƒä» 255 MB é™åˆ° 50 MB

---

## æ€»ç»“

| æ–¹æ¡ˆ | å®æ–½éš¾åº¦ | æ•ˆæœ | æ¨èåœºæ™¯ |
|------|---------|------|---------|
| **æœ¬åœ°ä»“åº“** | â­â­â­ | â­â­â­â­â­ | æ‰€æœ‰åœºæ™¯ |
| **åˆ†å±‚æ„å»º** | â­ | â­â­â­â­â­ | æ‰€æœ‰åœºæ™¯ |
| **Alpine** | â­ | â­â­â­ | æ‰€æœ‰åœºæ™¯ |
| Native Image | â­â­â­â­â­ | â­â­â­â­â­ | é«˜æ€§èƒ½éœ€æ±‚ |

**æˆ‘çš„å»ºè®®ï¼š**
1. **ç«‹å³å®æ–½**ï¼šAlpine + åˆ†å±‚æ„å»ºï¼ˆ1 å°æ—¶ï¼‰
2. **æœ¬å‘¨å®æ–½**ï¼šæœ¬åœ° Docker Registryï¼ˆ1 å¤©ï¼‰
3. **å¯é€‰**ï¼šGraalVM Native Imageï¼ˆ1 å‘¨ï¼‰

éœ€è¦æˆ‘å¸®ä½ å®æ–½å“ªä¸ªæ–¹æ¡ˆï¼Ÿ
